{% extends "base.html" %}

{% block title %}Categories — Aurora{% endblock %}

{% block content %}
<section class="section">
  <div class="container">
    <h1 class="page-title">Categories</h1>

    <form class="cat-search" method="get" action="">
      <input type="search" name="q" placeholder="Search categories…"
             value="{{ request.GET.q|default_if_none:'' }}">
      <button class="btn-search" type="submit">Search</button>
      {% if request.user.is_staff %}
        <a class="btn-new" href="{% url 'categories:create' %}">+ New category</a>
      {% endif %}
    </form>

    <div class="cats-grid">
      {% for cat in categories|default:object_list %}
        <a class="cat-tile" href="{% url 'articles:index' %}?category={{ cat.pk }}">
          <span class="cat-name">{{ cat.name }}</span>
          <span class="cat-count">{{ cat.article_count|default:"0" }}</span>
        </a>
      {% empty %}
        <p class="muted">No categories yet.</p>
      {% endfor %}
    </div>
  </div>
</section>
{% endblock %}
