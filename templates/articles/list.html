{% extends "base.html" %}
{% block title %}Articles — Aurora{% endblock %}
{% block content %}
<section class="section">
  <div class="container">
    <h2 class="page-title">Articles</h2>

    <form method="get" class="search">
      <input name="q" value="{{ request.GET.q|default:'' }}"
             placeholder="Search articles...">
      <button class="btn" type="submit">Search</button>
    </form>

    <div class="card-grid">
      {% for item in articles %}
        <a class="card" href="{{ item.get_absolute_url }}">
          <span class="badge">
            {{ item.published_at|date:"Y-m-d" }}
            • {{ item.reading_minutes }} min
          </span>
          <h3>{{ item.title }}</h3>
          <p class="muted">{{ item.description }}</p>
        </a>
      {% empty %}
        <p>No articles yet.</p>
      {% endfor %}
    </div>

    {% if is_paginated %}
      <div class="pagination">
        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}
                   {% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">
            « Prev
          </a>
        {% endif %}
        <span>
          Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        </span>
        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}
                   {% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">
            Next »
          </a>
        {% endif %}
      </div>
    {% endif %}
  </div>
</section>
{% endblock %}
